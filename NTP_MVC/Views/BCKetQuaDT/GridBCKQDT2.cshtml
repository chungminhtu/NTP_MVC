@using NTP_MVC.Models
@using DevExpress.Web.Rendering
@{
    var grid = Html.DevExpress().GridView(settings =>
    {
        /*Initial*/
        settings.Name = "GridBCTN2";
        settings.Width = Unit.Percentage(100);
        settings.CallbackRouteValues = new { Controller = "BCKetQuaDT", Action = "GridBCTN2" };
        settings.SettingsEditing.BatchUpdateRouteValues = new { Controller = "BCKetQuaDT", Action = "GridBCTN2BatchEditingUpdateModel" };

        settings.ClientSideEvents.BeginCallback = "GridBCKetQuaDT_OnBeginCallback";

        /* Behavior */ 
        settings.SettingsBehavior.AllowFocusedRow = true; 
        settings.SettingsBehavior.ConfirmDelete = true; 
        settings.SettingsBehavior.AllowDragDrop = false; 
        settings.Settings.ShowStatusBar = GridViewStatusBarMode.Visible;

        /*Events*/ 
        settings.SettingsEditing.Mode = GridViewEditingMode.Batch;
        settings.SettingsEditing.BatchEditSettings.EditMode = GridViewBatchEditMode.Cell;

        /* Pager */
        settings.SettingsPager.Mode = GridViewPagerMode.ShowPager;
        settings.SettingsPager.AllButton.Text = "Tất cả";
        settings.SettingsPager.NextPageButton.Text = "Tiếp theo >";
        settings.SettingsPager.PrevPageButton.Text = "< Quay lại";
        settings.SettingsPager.Visible = true;

        settings.KeyFieldName = "ID_BCKetQuaDTP2;ID_BCKetQuaDT;Phanloai";
 
        settings.Columns.Add(i =>
        {
            i.FieldName = "Phanloai";
            i.Caption = "Phân loại";
            i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
            i.Width = Unit.Pixel(350);
            i.HeaderStyle.Paddings.Padding = Unit.Pixel(2);
            i.ColumnType = MVCxGridViewColumnType.ComboBox;
            var comboBoxProperties = i.PropertiesEdit as ComboBoxProperties;
            comboBoxProperties.Items.Add("T.số", 0);
            comboBoxProperties.Items.Add("HIV(+)", 1);
            comboBoxProperties.DropDownHeight = 0;
        });
        //Lao phổi AFB dương tính
        settings.Columns.AddBand(Band1 =>
        {
            Band1.Caption = "Nhóm tuổi";
            Band1.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
            Band1.HeaderStyle.HorizontalAlign = HorizontalAlign.Center; 
            Band1.Columns.AddBand(Band2 =>
            {
                Band2.Caption = "0 - 4";
                Band2.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                Band2.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nam0";
                    i.Caption = "Nam";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nu0";
                    i.Caption = "Nữ";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                }); 
            });

            Band1.Columns.AddBand(Band2 =>
            {
                Band2.Caption = "5 - 14";
                Band2.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                Band2.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nam5";
                    i.Caption = "Nam";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nu5";
                    i.Caption = "Nữ";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
            });

            Band1.Columns.AddBand(Band2 =>
            {
                Band2.Caption = "15 - 24";
                Band2.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                Band2.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nam15";
                    i.Caption = "Nam";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nu15";
                    i.Caption = "Nữ";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
            });

            Band1.Columns.AddBand(Band2 =>
            {
                Band2.Caption = "25 - 34";
                Band2.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                Band2.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nam25";
                    i.Caption = "Nam";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nu25";
                    i.Caption = "Nữ";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
            });

            Band1.Columns.AddBand(Band2 =>
            {
                Band2.Caption = "35 - 44";
                Band2.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                Band2.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nam35";
                    i.Caption = "Nam";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nu35";
                    i.Caption = "Nữ";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
            });

            Band1.Columns.AddBand(Band2 =>
            {
                Band2.Caption = "45 - 54";
                Band2.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                Band2.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nam45";
                    i.Caption = "Nam";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nu45";
                    i.Caption = "Nữ";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
            });

            Band1.Columns.AddBand(Band2 =>
            {
                Band2.Caption = "55 - 64";
                Band2.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                Band2.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nam55";
                    i.Caption = "Nam";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nu55";
                    i.Caption = "Nữ";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
            });
            Band1.Columns.AddBand(Band2 =>
            {
                Band2.Caption = ">=65";
                Band2.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                Band2.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nam65";
                    i.Caption = "Nam";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
                Band2.Columns.Add(i =>
                {
                    i.FieldName = "Nu65";
                    i.Caption = "Nữ";
                    i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                    i.Width = Unit.Pixel(150);
                    i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
                });
            });
        });
        //Tổng số
        settings.Columns.AddBand(Band1 =>
        {
            Band1.Caption = "Tổng số";
            Band1.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
            Band1.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
            Band1.Columns.Add(i =>
            {
                //i.FieldName = "Nam";
                i.Caption = "Nam";
                i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                i.Width = Unit.Pixel(150);
                i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
            });
            Band1.Columns.Add(i =>
            {
               // i.FieldName = "Nữ";
                i.Caption = "Nữ";
                i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                i.Width = Unit.Pixel(150);
                i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
            });
            Band1.Columns.Add(i =>
            {
              //  i.FieldName = "Chung";
                i.Caption = "Chung";
                i.HeaderStyle.HorizontalAlign = HorizontalAlign.Center;
                i.Width = Unit.Pixel(150);
                i.HeaderStyle.Paddings.Padding = Unit.Pixel(1);
            }); 
        });
        

       
    });
    if (ViewData["EditError"] != null)
    {
        grid.SetEditErrorText((string)ViewData["EditError"]);
    }
    grid.Bind(ViewData["ListBCKetQuaDT2"]).GetHtml();
}
